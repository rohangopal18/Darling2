<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Darling â€“ PDF Merger</title>

<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

<style>
:root {
    --bg: #ffffff;
    --text: #111;
    --accent: #ff5fa2;
    --card: #f5f5f7;
}

body.dark {
    --bg: #0f0f12;
    --text: #f5f5f7;
    --card: #1a1a1e;
}

* {
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    transition: 0.3s;
}

/* Navbar */
.navbar {
    padding: 15px 30px;
    border-bottom: 1px solid #ddd;
}

.navbar nav a {
    margin-right: 15px;
    text-decoration: none;
    color: var(--text);
    font-weight: 500;
}

/* Theme switch */
.theme-switcher {
    position: absolute;
    top: 15px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.switch {
    position: relative;
    width: 46px;
    height: 24px;
}

.switch input {
    opacity: 0;
}

.slider {
    position: absolute;
    inset: 0;
    background: #ccc;
    border-radius: 24px;
}

.slider::before {
    content: "";
    position: absolute;
    width: 18px;
    height: 18px;
    left: 3px;
    top: 3px;
    background: white;
    border-radius: 50%;
    transition: 0.3s;
}

input:checked + .slider {
    background: var(--accent);
}

input:checked + .slider::before {
    transform: translateX(22px);
}

/* Container */
.container {
    max-width: 720px;
    margin: 80px auto;
    padding: 30px;
    background: var(--card);
    border-radius: 14px;
    text-align: center;
}

/* Upload area */
.upload-area {
    border: 2px dashed var(--accent);
    padding: 30px;
    margin: 25px 0;
    border-radius: 12px;
    cursor: pointer;
}

.upload-area.uploaded {
    border-style: solid;
}

.upload-area input {
    display: none;
}

.file-names {
    margin-top: 10px;
    font-size: 14px;
    opacity: 0.8;
}

/* Buttons */
.btn {
    padding: 12px 24px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 15px;
    margin-top: 15px;
}

.btn.download {
    text-decoration: none;
}

/* Progress */
.progress-wrapper {
    margin-top: 20px;
    display: none;
}

.progress-bar {
    height: 10px;
    background: #ddd;
    border-radius: 6px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    width: 0%;
    background: var(--accent);
    transition: width 0.3s;
}

/* Preview */
.preview {
    margin-top: 30px;
    display: none;
}

.preview iframe {
    width: 100%;
    height: 400px;
    border-radius: 10px;
    border: 1px solid #ccc;
}

/* Footer */
footer {
    text-align: center;
    padding: 20px;
    opacity: 0.6;
}
</style>
</head>

<body>

<header class="navbar">
<nav>
    <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About Us</a>
    <a href="contact.html">Contact Us</a>
    <a href="privacy.html">Privacy Policy</a>
</nav>

</header>

<div class="theme-switcher">
<label class="switch">
    <input type="checkbox" id="themeToggle">
    <span class="slider"></span>
</label>
<span id="themeText">Light</span>
</div>

<div class="container">
    <h1>ðŸ’— Darling ðŸ’—</h1>
    <p>Merge multiple PDFs instantly in your browser.</p>

    <div class="upload-area" id="uploadArea">
        <p id="uploadText">Drag & Drop PDFs here or click to select</p>
        <div class="file-names" id="fileNames"></div>
        <input type="file" id="pdfFiles" multiple accept="application/pdf">
    </div>

    <button class="btn" id="mergeBtn">Merge PDFs</button><br>
    <a id="downloadLink" class="btn download" style="display:none;">Download PDF</a>

    <div class="progress-wrapper" id="progress">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <p id="progressText">Processingâ€¦</p>
    </div>

    <div class="preview" id="preview">
        <h3>Preview</h3>
        <iframe id="pdfPreview"></iframe>
    </div>
</div>

<footer>
    Darling Â© 2026
</footer>

<script>
/* Theme */
const toggle = document.getElementById("themeToggle");
toggle.onchange = () => {
    document.body.classList.toggle("dark");
    document.getElementById("themeText").textContent =
        toggle.checked ? "Dark" : "Light";
};

/* Upload */
const uploadArea = document.getElementById("uploadArea");
const fileInput = document.getElementById("pdfFiles");
const uploadText = document.getElementById("uploadText");
const fileNames = document.getElementById("fileNames");

uploadArea.onclick = () => fileInput.click();

fileInput.onchange = () => {
    const files = fileInput.files;
    if (!files.length) return;

    uploadArea.classList.add("uploaded");
    uploadText.textContent = `âœ” ${files.length} PDF(s) uploaded`;

    fileNames.innerHTML = "";
    [...files].forEach(f => {
        fileNames.innerHTML += `${f.name}<br>`;
    });
};

/* Merge PDFs */
document.getElementById("mergeBtn").onclick = async () => {
    const files = fileInput.files;
    if (files.length < 2) {
        alert("Please select at least 2 PDFs");
        return;
    }

    const progress = document.getElementById("progress");
    const fill = document.getElementById("progressFill");
    const text = document.getElementById("progressText");
    const preview = document.getElementById("preview");

    progress.style.display = "block";
    fill.style.width = "0%";

    const mergedPdf = await PDFLib.PDFDocument.create();

    for (let i = 0; i < files.length; i++) {
        text.textContent = `Merging ${files[i].name}`;
        const bytes = await files[i].arrayBuffer();
        const pdf = await PDFLib.PDFDocument.load(bytes);
        const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
        pages.forEach(p => mergedPdf.addPage(p));
        fill.style.width = `${((i + 1) / files.length) * 100}%`;
    }

    text.textContent = "Finalizingâ€¦";

    const mergedBytes = await mergedPdf.save();
    const blob = new Blob([mergedBytes], { type: "application/pdf" });
    const url = URL.createObjectURL(blob);

    document.getElementById("downloadLink").href = url;
    document.getElementById("downloadLink").style.display = "inline-block";
    document.getElementById("pdfPreview").src = url;

    preview.style.display = "block";
    text.textContent = "Done âœ”";
};
</script>

</body>
</html>
